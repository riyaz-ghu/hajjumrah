import{c as o,u,r,j as e,S as g}from"./index-o6bFHvLj.js";import{E as N,P as v,a as y}from"./ErrorBoundary-Bsc-wGX0.js";import{B as d,C as b,a as w,s as E}from"./supabase-fagYWzpQ.js";import{M as A}from"./map-pin-DWlDs7_B.js";import{S}from"./star-Cq1-LI8R.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k=o("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z=o("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),L=()=>{const i=u(),[n,x]=r.useState([]),[m,h]=r.useState(!0),[l,p]=r.useState(null);r.useEffect(()=>{(async()=>{try{const{data:a,error:t}=await E.from("ghu_operators").select("*").order("created_at",{ascending:!1});if(t)throw t;x(a||[])}catch(a){console.error("Error fetching operators:",a),p("Failed to load operators")}finally{h(!1)}})()},[]);const c=()=>{i("/operators/add")},j=s=>{i(`/operators/edit/${s}`)},f=s=>[...Array(5)].map((a,t)=>e.jsx(S,{size:16,className:t<s?"text-amber-500 fill-amber-500":"text-slate-300"},t));return l?e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 text-center",children:[e.jsx("p",{className:"text-red-700",children:l}),e.jsx(d,{variant:"outline",className:"mt-4",onClick:()=>window.location.reload(),children:"Try Again"})]})}):e.jsx(N,{children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx(v,{title:"Operators",description:"Manage Umrah tour operators and service providers",onAddNew:c}),m?e.jsx("div",{className:"flex justify-center my-12",children:e.jsx(g,{size:"lg"})}):n.length===0?e.jsx(y,{title:"No operators found",description:"Get started by adding your first Umrah operator",actionText:"Add Operator",onAction:c}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(s=>e.jsx(b,{className:"h-full",children:e.jsxs(w,{children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[s.photo_url?e.jsx("img",{src:s.photo_url,alt:s.name,className:"w-16 h-16 object-cover rounded-lg mr-4"}):e.jsx("div",{className:"w-16 h-16 bg-slate-100 rounded-lg flex items-center justify-center mr-4",children:e.jsx("span",{className:"text-2xl font-bold text-slate-400",children:s.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-slate-900",children:s.name}),e.jsx("p",{className:"text-sm text-slate-500",children:s.city})]})]}),e.jsx(d,{variant:"outline",size:"sm",onClick:()=>j(s.id),children:"Edit"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[f(s.rating||0),e.jsxs("span",{className:"ml-2 text-sm text-slate-600",children:["(",s.review_count||0," reviews)"]})]}),e.jsxs("div",{className:"flex items-start space-x-2 text-sm text-slate-600",children:[e.jsx(A,{size:16,className:"mt-1 flex-shrink-0"}),e.jsx("span",{children:s.address})]}),s.phone&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-slate-600",children:[e.jsx(z,{size:16}),e.jsx("span",{children:s.phone})]}),s.website&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(k,{size:16}),e.jsx("a",{href:s.website,target:"_blank",rel:"noopener noreferrer",className:"text-emerald-600 hover:text-emerald-700",children:"Visit Website"})]})]})]})},s.id))})]})})};export{L as default};
